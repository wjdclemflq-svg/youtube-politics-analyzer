<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ëŒ€ê·œëª¨ ì •ì¹˜ ìœ íŠœë¸Œ ë¶„ì„ ëŒ€ì‹œë³´ë“œ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root { 
      --bg: #f8fafc; 
      --card: #ffffff; 
      --muted: #64748b; 
      --text: #1e293b; 
      --accent: #3b82f6; 
      --success: #10b981;
      --warning: #f59e0b;
      --error: #ef4444;
      --border: #e2e8f0;
      --hover: #f1f5f9;
      --purple: #8b5cf6;
      --orange: #f97316;
    }
    
    * { box-sizing: border-box }
    body { 
      margin: 0; 
      font-family: Inter, system-ui, 'Segoe UI', Roboto, sans-serif; 
      background: var(--bg); 
      color: var(--text);
      line-height: 1.5;
    }
    
    .wrap { max-width: 1600px; margin: 0 auto; padding: 24px }
    
    /* í—¤ë” */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }
    
    .title-section h1 {
      font-size: 32px;
      margin: 0 0 8px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent), var(--purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .subtitle {
      color: var(--muted);
      font-size: 16px;
    }
    
    .header-stats {
      display: flex;
      gap: 24px;
      align-items: center;
    }
    
    .stat-badge {
      text-align: center;
      padding: 8px 16px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    
    .stat-badge .number {
      font-size: 24px;
      font-weight: 700;
      color: var(--accent);
      margin: 0;
    }
    
    .stat-badge .label {
      font-size: 12px;
      color: var(--muted);
      margin: 0;
    }
    
    /* ìƒíƒœ í‘œì‹œì¤„ */
    .status-bar {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 16px 20px;
      margin-bottom: 24px;
      display: grid;
      grid-template-columns: 1fr auto auto;
      gap: 20px;
      align-items: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }
    
    .status-main {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .status-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .status-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--success);
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .status-dot.loading { background: var(--warning); }
    .status-dot.error { background: var(--error); }
    
    .data-sources {
      display: flex;
      gap: 8px;
    }
    
    .source-badge {
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 500;
      text-transform: uppercase;
    }
    
    .source-badge.github { background: #f3f4f6; color: #374151; }
    .source-badge.apps-script { background: #dbeafe; color: #1e40af; }
    .source-badge.rss { background: #fef3c7; color: #92400e; }
    .source-badge.social { background: #ecfdf5; color: #065f46; }
    
    /* íƒ­ */
    .tabs { 
      display: flex; 
      gap: 8px; 
      margin-bottom: 24px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
    }
    
    .tab { 
      padding: 12px 20px; 
      background: transparent; 
      border: none;
      border-radius: 8px; 
      color: var(--muted); 
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s ease;
      position: relative;
    }
    
    .tab.active { 
      color: var(--accent);
      background: var(--hover);
    }
    
    .tab.active::after {
      content: '';
      position: absolute;
      bottom: -9px;
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 3px;
      background: var(--accent);
      border-radius: 2px;
    }
    
    .tab:hover:not(.active) {
      background: var(--hover);
    }
    
    /* ì¹´ë“œ */
    .card { 
      background: var(--card); 
      border: 1px solid var(--border); 
      border-radius: 16px; 
      padding: 24px; 
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      margin-bottom: 24px;
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .card-title {
      font-size: 18px;
      font-weight: 600;
      margin: 0;
      color: var(--text);
    }
    
    /* ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ */
    .grid {
      display: grid;
      gap: 24px;
    }
    
    .grid-2 { grid-template-columns: 1fr 1fr; }
    .grid-3 { grid-template-columns: 1fr 1fr 1fr; }
    .grid-4 { grid-template-columns: repeat(4, 1fr); }
    
    /* í…Œì´ë¸” */
    .table-container {
      overflow: auto;
      max-height: 500px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: var(--card);
    }
    
    table { 
      width: 100%; 
      border-collapse: collapse; 
      font-size: 14px;
      min-width: 800px;
    }
    
    th, td { 
      padding: 16px; 
      border-bottom: 1px solid var(--border); 
      text-align: left;
    }
    
    th { 
      background: #f8fafc;
      color: var(--text); 
      font-weight: 600;
      position: sticky;
      top: 0;
      z-index: 10;
      border-bottom: 2px solid var(--border);
    }
    
    tr:hover { 
      background: var(--hover); 
    }
    
    tr:last-child td {
      border-bottom: none;
    }
    
    .thumb { 
      width: 60px; 
      height: 40px; 
      object-fit: cover; 
      border-radius: 8px; 
      border: 1px solid var(--border);
    }
    
    .video-thumb {
      width: 84px;
      height: 56px;
      object-fit: cover;
      border-radius: 10px;
      border: 1px solid var(--border);
    }
    
    .title { 
      font-weight: 600; 
      color: var(--accent); 
      cursor: pointer;
      text-decoration: none;
    }
    .title:hover { text-decoration: underline; }
    
    .positive { color: var(--success); font-weight: 600; }
    .negative { color: var(--error); font-weight: 600; }
    
    .chip { 
      padding: 6px 12px; 
      border: 1px solid var(--border); 
      border-radius: 20px; 
      color: var(--accent); 
      font-size: 12px;
      background: #eff6ff;
      font-weight: 500;
    }
    
    /* ë©”íŠ¸ë¦­ ì¹´ë“œ */
    .metric-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }
    
    .metric-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    
    .metric-value {
      font-size: 28px;
      font-weight: 700;
      margin: 8px 0;
    }
    
    .metric-value.channels { color: var(--accent); }
    .metric-value.videos { color: var(--success); }
    .metric-value.views { color: var(--purple); }
    .metric-value.trends { color: var(--orange); }
    
    .metric-label {
      font-size: 14px;
      color: var(--muted);
      font-weight: 500;
    }
    
    .metric-change {
      font-size: 12px;
      margin-top: 4px;
    }
    
    .metric-change.up { color: var(--success); }
    .metric-change.down { color: var(--error); }
    
    /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      animation: fadeIn 0.3s;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .modal-content {
      background-color: #ffffff;
      margin: 3% auto;
      padding: 0;
      border-radius: 8px;
      width: 90%;
      max-width: 1000px;
      max-height: 90vh;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      animation: slideIn 0.3s;
    }
    
    @keyframes slideIn {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
      border-bottom: 1px solid #e5e7eb;
      background: #fafafa;
    }
    
    .modal-body {
      padding: 24px;
      max-height: calc(90vh - 60px);
      overflow-y: auto;
      background: #ffffff;
    }
    
    .close {
      color: #6b7280;
      font-size: 24px;
      font-weight: normal;
      cursor: pointer;
      transition: color 0.2s;
      line-height: 1;
      padding: 0;
    }
    
    .close:hover {
      color: #374151;
    }
    
    /* ìŠ¤í¬ë¡¤ë°” */
    .table-container::-webkit-scrollbar,
    .modal-body::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    .table-container::-webkit-scrollbar-track,
    .modal-body::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 4px;
    }
    
    .table-container::-webkit-scrollbar-thumb,
    .modal-body::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 4px;
    }
    
    .table-container::-webkit-scrollbar-thumb:hover,
    .modal-body::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }
    
    /* ë°˜ì‘í˜• */
    @media (max-width: 1200px) {
      .grid-4 { grid-template-columns: repeat(2, 1fr); }
      .grid-3 { grid-template-columns: repeat(2, 1fr); }
    }
    
    @media (max-width: 768px) {
      .wrap { padding: 16px; }
      .header { flex-direction: column; gap: 16px; text-align: center; }
      .header-stats { justify-content: center; }
      .status-bar { grid-template-columns: 1fr; gap: 12px; }
      .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; }
      .channel-info { grid-template-columns: repeat(2, 1fr); }
      .modal-content { width: 95%; margin: 2% auto; }
      table { font-size: 13px; }
      th, td { padding: 12px; }
    }
    
    /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid var(--border);
      border-top: 2px solid var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- í—¤ë” -->
    <div class="header">
      <div class="title-section">
        <h1>ëŒ€ê·œëª¨ ì •ì¹˜ ìœ íŠœë¸Œ ë¶„ì„ ëŒ€ì‹œë³´ë“œ</h1>
        <p class="subtitle">ë©€í‹°ì†ŒìŠ¤ ì‹¤ì‹œê°„ ë°ì´í„° í†µí•© ë¶„ì„ í”Œë«í¼</p>
      </div>
      <div class="header-stats">
        <div class="stat-badge">
          <div id="total-channels" class="number">-</div>
          <div class="label">ì±„ë„</div>
        </div>
        <div class="stat-badge">
          <div id="total-videos" class="number">-</div>
          <div class="label">ë™ì˜ìƒ</div>
        </div>
        <div class="stat-badge">
          <div id="total-views" class="number">-</div>
          <div class="label">ì´ ì¡°íšŒìˆ˜</div>
        </div>
      </div>
    </div>
    
    <!-- ìƒíƒœ í‘œì‹œì¤„ -->
    <div class="status-bar">
      <div class="status-main">
        <div class="status-indicator">
          <div id="status-dot" class="status-dot"></div>
          <span id="status-text">ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì¤‘...</span>
        </div>
        <div class="loading-spinner" id="loading-spinner" style="display: none;"></div>
      </div>
      
      <div class="data-sources">
        <span class="source-badge github">GitHub</span>
        <span class="source-badge apps-script">Apps Script</span>
        <span class="source-badge rss">RSS</span>
        <span class="source-badge social">Social</span>
      </div>
      
      <div id="last-updated">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: -</div>
    </div>
    
    <!-- ë©”íŠ¸ë¦­ ì¹´ë“œ -->
    <div class="metric-cards">
      <div class="metric-card">
        <div class="metric-value channels" id="metric-channels">-</div>
        <div class="metric-label">ëª¨ë‹ˆí„°ë§ ì±„ë„</div>
        <div class="metric-change up" id="metric-channels-change">+5.2%</div>
      </div>
      <div class="metric-card">
        <div class="metric-value videos" id="metric-videos">-</div>
        <div class="metric-label">ìˆ˜ì§‘ ë™ì˜ìƒ</div>
        <div class="metric-change up" id="metric-videos-change">+12.8%</div>
      </div>
      <div class="metric-card">
        <div class="metric-value views" id="metric-views">-</div>
        <div class="metric-label">ì´ ì¡°íšŒìˆ˜</div>
        <div class="metric-change up" id="metric-views-change">+8.4%</div>
      </div>
      <div class="metric-card">
        <div class="metric-value trends" id="metric-trends">-</div>
        <div class="metric-label">íŠ¸ë Œë“œ ì§€í‘œ</div>
        <div class="metric-change up" id="metric-trends-change">+15.6%</div>
      </div>
    </div>
    
    <!-- íƒ­ -->
    <div class="tabs">
      <button class="tab active" data-tab="overview">ğŸ“Š ì „ì²´ í˜„í™©</button>
      <button class="tab" data-tab="analysis">ğŸ”¥ ê¸‰ìƒìŠ¹ ë¶„ì„</button>
      <button class="tab" data-tab="trends">ğŸ“ˆ íŠ¸ë Œë“œ</button>
      <button class="tab" data-tab="social">ğŸ’¬ ì†Œì…œ ë°˜ì‘</button>
      <button class="tab" data-tab="system">âš™ï¸ ì‹œìŠ¤í…œ í˜„í™©</button>
    </div>

    <!-- ì „ì²´ í˜„í™© íƒ­ -->
    <section id="overview" class="tab-content">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">[ì¹´í…Œê³ ë¦¬] ì¼ë³„ ì¢…í•© í˜„í™©</h3>
          <span id="overview-date" class="chip">ì‹¤ì‹œê°„</span>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th style="min-width: 120px">ë‚ ì§œ</th>
                <th style="min-width: 100px">ì¹´í…Œê³ ë¦¬</th>
                <th style="min-width: 140px">ì´ ì¡°íšŒìˆ˜</th>
                <th style="min-width: 140px">ì „ì¼ ì´ ì¡°íšŒìˆ˜</th>
                <th style="min-width: 140px">ì¦ê°ìœ¨ (%)</th>
                <th style="min-width: 120px">ìˆ˜ì§‘ ì±„ë„</th>
              </tr>
            </thead>
            <tbody id="overview-body"></tbody>
          </table>
        </div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">ğŸ“º ìµœê·¼ ì¡°íšŒìˆ˜ ê¸‰ë“± ì±„ë„</h3>
          <span class="chip">ì‹¤ì‹œê°„ ë°ì´í„°</span>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th style="min-width: 80px">ìˆœìœ„</th>
                <th style="min-width: 80px">ì¸ë„¤ì¼</th>
                <th style="min-width: 150px">ì±„ë„ëª…</th>
                <th style="min-width: 120px">êµ¬ë…ì</th>
                <th style="min-width: 120px">ì´ ì¡°íšŒìˆ˜</th>
                <th style="min-width: 100px">ì „ì¼ ì´ ì¡°íšŒìˆ˜</th>
                <th style="min-width: 100px">ì¡°íšŒìˆ˜ ì¦ê°€</th>
                <th style="min-width: 100px">ì¦ê°€ìœ¨</th>
                
                
              </tr>
            </thead>
            <tbody id="channels-body"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- ê¸‰ìƒìŠ¹ ë¶„ì„ íƒ­ -->
    <section id="analysis" class="tab-content" style="display: none">
      <div class="grid grid-2">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ğŸ”¥ ì¡°íšŒìˆ˜ ê¸‰ì¦ ë™ì˜ìƒ</h3>
            <span class="chip">TOP 30</span>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>ìˆœìœ„</th>
                  <th>ì¸ë„¤ì¼</th>
                  <th style="min-width: 200px">ì œëª©</th>
                  <th>ì—…ë¡œë“œì¼</th>
                  <th>ì¡°íšŒìˆ˜ ì¦ê°€</th>
                  <th>ì¢‹ì•„ìš”</th>
                  <th>ëŒ“ê¸€</th>
                </tr>
              </thead>
              <tbody id="spikes-body"></tbody>
            </table>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">â­ í‰ê·  ëŒ€ë¹„ ìš°ìˆ˜ ë™ì˜ìƒ</h3>
            <span class="chip">TOP 20</span>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>ìˆœìœ„</th>
                  <th>ì¸ë„¤ì¼</th>
                  <th style="min-width: 200px">ì œëª©</th>
                  <th style="min-width: 120px">ì±„ë„ëª…</th>
                  <th>ì—…ë¡œë“œì¼</th>
                  <th>ì„±ê³¼ ë°°ìˆ˜</th>
                  <th>ì¡°íšŒìˆ˜</th>
                </tr>
              </thead>
              <tbody id="above-body"></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- íŠ¸ë Œë“œ íƒ­ -->
    <section id="trends" class="tab-content" style="display: none">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">ğŸ“ˆ ì •ì¹˜ í‚¤ì›Œë“œ íŠ¸ë Œë“œ</h3>
          <span class="chip">Google Trends + ì†Œì…œ ë°ì´í„°</span>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>ìˆœìœ„</th>
                <th>í‚¤ì›Œë“œ</th>
                <th>ê´€ì‹¬ë„</th>
                <th>ë³€í™”ìœ¨</th>
                <th>ì†ŒìŠ¤</th>
                <th>ì—…ë°ì´íŠ¸</th>
              </tr>
            </thead>
            <tbody id="trends-body"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- ì†Œì…œ ë°˜ì‘ íƒ­ -->
    <section id="social" class="tab-content" style="display: none">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">ğŸ’¬ ì†Œì…œ ë¯¸ë””ì–´ ë°˜ì‘</h3>
          <span class="chip">Reddit + ì»¤ë®¤ë‹ˆí‹°</span>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>ìˆœìœ„</th>
                <th style="min-width: 250px">ì œëª©</th>
                <th>ì ìˆ˜</th>
                <th>ëŒ“ê¸€ ìˆ˜</th>
                <th>ì†ŒìŠ¤</th>
                <th>ì‘ì„± ì‹œê°„</th>
              </tr>
            </thead>
            <tbody id="social-body"></tbody>
          </table>
        </div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">ğŸ“° ë‰´ìŠ¤ ë™í–¥</h3>
          <span class="chip">ë„¤ì´ë²„ ë‰´ìŠ¤ API</span>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>ìˆœìœ„</th>
                <th style="min-width: 300px">ë‰´ìŠ¤ ì œëª©</th>
                <th>í‚¤ì›Œë“œ</th>
                <th>ë°œí–‰ ì‹œê°„</th>
                <th>ë§í¬</th>
              </tr>
            </thead>
            <tbody id="news-body"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- ì‹œìŠ¤í…œ í˜„í™© íƒ­ -->
    <section id="system" class="tab-content" style="display: none">
      <div class="grid grid-2">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ğŸ–¥ï¸ ì‹œìŠ¤í…œ ìƒíƒœ</h3>
            <span class="chip">ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</span>
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>ê³„ì •</th>
                  <th>ìƒíƒœ</th>
                  <th>ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</th>
                  <th>ë°ì´í„° í¬ê¸°</th>
                  <th>ì±„ë„ ìˆ˜</th>
                  <th>ë™ì˜ìƒ ìˆ˜</th>
                </tr>
              </thead>
              <tbody id="system-body"></tbody>
            </table>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ğŸ“Š ë°ì´í„° í’ˆì§ˆ ì§€í‘œ</h3>
            <span class="chip">í’ˆì§ˆ ê´€ë¦¬</span>
          </div>
          <div id="quality-metrics" style="padding: 20px;">
            <div style="margin-bottom: 16px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                <span>ì±„ë„ ì»¤ë²„ë¦¬ì§€</span>
                <span id="channel-coverage">0/0</span>
              </div>
              <div style="background: #e5e7eb; height: 8px; border-radius: 4px; overflow: hidden;">
                <div id="channel-progress" style="background: var(--success); height: 100%; width: 0%; transition: width 0.3s;"></div>
              </div>
            </div>
            
            <div style="margin-bottom: 16px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                <span>ë™ì˜ìƒ ìˆ˜ì§‘ìœ¨</span>
                <span id="video-coverage">0/0</span>
              </div>
              <div style="background: #e5e7eb; height: 8px; border-radius: 4px; overflow: hidden;">
                <div id="video-progress" style="background: var(--accent); height: 100%; width: 0%; transition: width 0.3s;"></div>
              </div>
            </div>
            
            <div style="margin-bottom: 16px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                <span>API ì‚¬ìš©ìœ¨</span>
                <span id="api-usage">0%</span>
              </div>
              <div style="background: #e5e7eb; height: 8px; border-radius: 4px; overflow: hidden;">
                <div id="api-progress" style="background: var(--warning); height: 100%; width: 0%; transition: width 0.3s;"></div>
              </div>
            </div>
            
            <div class="grid grid-2" style="margin-top: 20px; gap: 16px;">
              <div style="text-align: center; padding: 12px; background: var(--hover); border-radius: 8px;">
                <div style="font-size: 20px; font-weight: 700; color: var(--success);" id="duplicates-removed">0</div>
                <div style="font-size: 12px; color: var(--muted);">ì œê±°ëœ ì¤‘ë³µ</div>
              </div>
              <div style="text-align: center; padding: 12px; background: var(--hover); border-radius: 8px;">
                <div style="font-size: 20px; font-weight: 700; color: var(--purple);" id="active-sources">0</div>
                <div style="font-size: 12px; color: var(--muted);">í™œì„± ë°ì´í„° ì†ŒìŠ¤</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">ğŸ“ˆ ìˆ˜ì§‘ í†µê³„</h3>
          <span class="chip">ì‹¤ì‹œê°„ ì°¨íŠ¸</span>
        </div>
        <canvas id="stats-chart" height="300"></canvas>
      </div>
    </section>
  </div>

  <!-- ëª¨ë‹¬ -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 style="margin: 0; font-size: 20px; font-weight: 600;">ì±„ë„ ì •ë³´</h2>
        <span id="close" class="close">&times;</span>
      </div>
      <div class="modal-body">
        <!-- ì±„ë„ ID ì„¹ì…˜ -->
        <div style="margin-bottom: 20px;">
          <span style="color: var(--muted); font-size: 12px;">Channel ID</span>
          <div style="display: inline-block; padding: 4px 12px; background: #e3f2fd; border-radius: 20px; margin-left: 10px;">
            <span id="channel-id" style="color: #1976d2; font-size: 13px;">UCh_3672e3gi9TzLUCpv</span>
            <span style="color: #1976d2; cursor: pointer; margin-left: 4px;">âœ•</span>
          </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
          <!-- ì™¼ìª½: ì±„ë„ ì •ë³´ -->
          <div>
            <h3 style="font-size: 14px; color: var(--muted); margin-bottom: 16px; font-weight: 500;">ì±„ë„ ì •ë³´</h3>
            
            <div style="display: grid; grid-template-columns: 100px 1fr; gap: 12px; row-gap: 16px; font-size: 14px;">
              <div style="color: var(--muted);">ì¸ë„¤ì¼</div>
              <div><img id="channel-avatar" src="https://picsum.photos/40/40" alt="ì¸ë„¤ì¼" style="width: 40px; height: 40px; border-radius: 4px;"></div>
              
              <div style="color: var(--muted);">ì±„ë„ëª…</div>
              <div id="channel-name" style="font-weight: 500;">ì±„ë„ëª…</div>
              
              <div style="color: var(--muted);">ì±„ë„ì„¤ëª…</div>
              <div id="channel-desc" style="font-weight: 500;">íŒ¬íŠœë¸Œ ğŸ“§ example@gmail.com</div>
              
              <div style="color: var(--muted);">ì¹´í…Œê³ ë¦¬</div>
              <div id="channel-category" style="font-weight: 500;">ì§œì§‘ê¸°</div>
              
              <div style="color: var(--muted);">ì„¸ë¶€ì¹´í…Œê³ ë¦¬</div>
              <div id="channel-subcategory" style="font-weight: 500;">ì¿¨</div>
              
              <div style="color: var(--muted);">ìœ íŠœë¸ŒURL</div>
              <div><a id="channel-url" href="#" target="_blank" style="color: var(--accent); text-decoration: none; word-break: break-all;">https://www.youtube.com/channel/...</a></div>
            </div>
          </div>
          
          <!-- ì˜¤ë¥¸ìª½: ìƒì„¸ ì •ë³´ -->
          <div>
            <h3 style="font-size: 14px; color: var(--muted); margin-bottom: 16px; font-weight: 500;">ìƒì„¸ ì •ë³´</h3>
            
            <div style="display: grid; grid-template-columns: 150px 1fr; gap: 12px; row-gap: 16px; font-size: 14px;">
              <div style="color: var(--muted);">ì¼í‰ê·  ì—…ë¡œë“œìˆ˜</div>
              <div id="daily-uploads" style="font-weight: 600;">0</div>
              
              <div style="color: var(--muted);">7/30-8/5 ì´ ì¡°íšŒìˆ˜</div>
              <div id="weekly-views" style="font-weight: 600;">0</div>
              
              <div style="color: var(--muted);">ì˜ìƒí‰ê· ì‹œê°„(ì´ˆ)</div>
              <div id="avg-duration" style="font-weight: 600;">0</div>
              
              <div style="color: var(--muted);">ìˆí¼ ë¹„ìœ¨(%)</div>
              <div id="shorts-ratio" style="font-weight: 600;">0</div>
            </div>
          </div>
        </div>
        
        <!-- ì°¨íŠ¸ ì„¹ì…˜ -->
        <div style="margin-top: 32px; border-top: 1px solid var(--border); padding-top: 24px;">
          <h3 style="font-size: 14px; color: var(--muted); margin-bottom: 16px; font-weight: 500;">ì±„ë„ ì¼ë³„ ì¡°íšŒìˆ˜</h3>
          <div style="background: #fafafa; padding: 20px; border-radius: 8px;">
            <canvas id="chart" height="250"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
class EnhancedYouTubeDashboard {
  constructor() {
    this.data = null;
    this.statsData = null;
    this.healthData = null;
    this.charts = {
      channelModal: null,
      stats: null
    };
    this.updateInterval = null;
    this.init();
  }

  async init() {
    console.log('ğŸš€ ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™” ì‹œì‘');
    this.updateStatus('loading', 'ëŒ€ê·œëª¨ ë°ì´í„° ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì¤‘...');
    this.setupEventListeners();
    await this.loadAllData();
    this.render();
    this.startAutoRefresh();
    console.log('âœ… ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™” ì™„ë£Œ');
  }

  async loadAllData() {
    try {
      // GitHub Pages ë˜ëŠ” ë¡œì»¬ì—ì„œ ë°ì´í„° ë¡œë“œ
      const baseUrl = window.location.hostname === 'localhost' 
        ? '.' 
        : window.location.hostname.includes('github.io')
        ? '.'  // GitHub Pagesì—ì„œëŠ” ìƒëŒ€ ê²½ë¡œ ì‚¬ìš©
        : `https://raw.githubusercontent.com/${this.getRepoPath()}/main`;
      
      console.log('ğŸ“ ë°ì´í„° ë¡œë“œ ì‹œì‘, baseUrl:', baseUrl);
      
      // ìˆ˜ì •: 4ê°œ íŒŒì¼ì„ ëª¨ë‘ ë¡œë“œ
      const [channelsData, videosData, shortsData, summaryData] = await Promise.all([
        this.loadDataFile(`${baseUrl}/data/channels.json`).catch(() => null),
        this.loadDataFile(`${baseUrl}/data/videos.json`).catch(() => null),
        this.loadDataFile(`${baseUrl}/data/shorts.json`).catch(() => null),
        this.loadDataFile(`${baseUrl}/data/summary.json`).catch(() => null)
      ]);

      if (channelsData) {
        this.data = {
          channels: channelsData.channels || channelsData || [],
          videos: videosData || [],
          shorts: shortsData || [],
          statistics: summaryData || {},
          timestamp: channelsData.timestamp || new Date().toISOString()
        };
        this.updateStatus('success', 'ì‹¤ì‹œê°„ ë°ì´í„° ì—°ê²°ë¨');
        console.log('âœ… ì‹¤ì œ ë°ì´í„° ë¡œë“œ ì„±ê³µ:', this.data.channels?.length, 'ê°œ ì±„ë„,', this.data.videos?.length, 'ê°œ ë™ì˜ìƒ,', this.data.shorts?.length, 'ê°œ ìˆì¸ ');
      } else {
        // ëŒ€ì²´ ë°ì´í„° ì†ŒìŠ¤ ì‹œë„
        const fallbackData = await this.loadDataFile(`${baseUrl}/data/latest.json`).catch(() => null);
        if (fallbackData) {
          this.data = {
            channels: fallbackData.channels || [],
            videos: fallbackData.videos || [],
            shorts: fallbackData.shorts || [],
            statistics: fallbackData.statistics || {},
            timestamp: fallbackData.timestamp
          };
          this.updateStatus('success', 'í†µí•© ë°ì´í„° ì—°ê²°ë¨');
        } else {
          // ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©
          console.log('âš ï¸ ì‹¤ì œ ë°ì´í„° ì—†ìŒ, ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©');
          this.data = this.getSampleData();
          this.updateStatus('warning', 'ìƒ˜í”Œ ë°ì´í„° ëª¨ë“œ');
        }
      }

      this.summaryData = summaryData || this.getSampleStats();
      this.updateLastUpdated();

    } catch (error) {
      console.error('âŒ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
      this.data = this.getSampleData();
      this.updateStatus('error', 'ì˜¤í”„ë¼ì¸ ëª¨ë“œ (ìƒ˜í”Œ ë°ì´í„°)');
    }
  }

  getRepoPath() {
    // GitHub Pages URLì—ì„œ ë ˆí¬ì§€í† ë¦¬ ê²½ë¡œ ì¶”ì¶œ
    const pathname = window.location.pathname;
    const match = pathname.match(/^\/([^\/]+\/[^\/]+)/);
    return match ? match[1] : 'wjdclemflq-svg/youtube-politics-analyzer';
  }

  async loadDataFile(url) {
    console.log('ğŸ“¡ íŒŒì¼ ë¡œë“œ ì‹œë„:', url);
    const response = await fetch(url);
    if (!response.ok) {
      console.error('âŒ íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨:', url, response.status);
      throw new Error(`Failed to load ${url}`);
    }
    const data = await response.json();
    console.log('âœ… íŒŒì¼ ë¡œë“œ ì„±ê³µ:', url);
    return data;
  }

  updateStatus(status, message) {
    const statusDot = document.getElementById('status-dot');
    const statusText = document.getElementById('status-text');
    const spinner = document.getElementById('loading-spinner');

    statusDot.className = `status-dot ${status}`;
    statusText.textContent = message;
    
    if (status === 'loading') {
      spinner.style.display = 'inline-block';
    } else {
      spinner.style.display = 'none';
    }
  }

  updateLastUpdated() {
    if (this.data?.timestamp) {
      const lastUpdated = new Date(this.data.timestamp);
      document.getElementById('last-updated').textContent = 
        `ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ${lastUpdated.toLocaleString('ko-KR')}`;
    }
  }

  updateHeaderStats() {
    // summary.jsonì˜ ë°ì´í„°ë¥¼ ì§ì ‘ ì‚¬ìš©
    const channels = this.summaryData?.totalChannelsAnalyzed || this.data?.channels?.length || 0;
    const videos = this.summaryData?.totalVideos || 0;
    const shorts = this.summaryData?.totalShorts || 0;
    const totalViews = this.summaryData?.totalViewCount || this.data?.channels?.reduce((sum, ch) => sum + (ch.viewCount || 0), 0) || 0;
    
    console.log('ğŸ“Š í—¤ë” í†µê³„ ì—…ë°ì´íŠ¸:', { channels, videos, shorts, totalViews });
    
    document.getElementById('total-channels').textContent = this.fmt(channels);
    document.getElementById('total-videos').textContent = this.fmt(videos);
    document.getElementById('total-views').textContent = this.formatViews(totalViews);

    // ë©”íŠ¸ë¦­ ì¹´ë“œ ì—…ë°ì´íŠ¸
    document.getElementById('metric-channels').textContent = this.fmt(channels);
    document.getElementById('metric-videos').textContent = this.fmt(videos);
    document.getElementById('metric-views').textContent = this.formatViews(totalViews);
    document.getElementById('metric-trends').textContent = this.fmt(shorts);
  }

  formatViews(views) {
    if (views >= 1000000000) return (views / 1000000000).toFixed(1) + 'B';
    if (views >= 1000000) return (views / 1000000).toFixed(1) + 'M';
    if (views >= 1000) return (views / 1000).toFixed(1) + 'K';
    return views.toString();
  }

  fmt(n) { 
    return (n || 0).toLocaleString('ko-KR'); 
  }

  loadOverview() {
    const tbody = document.getElementById('overview-body');
    tbody.innerHTML = '';
    
    // í˜„ì¬ ë°ì´í„°ë¡œë¶€í„° ìš”ì•½ ìƒì„±
    const today = new Date().toISOString().split('T')[0];
    const channels = this.data?.channels || [];
    const totalViews = channels.reduce((sum, ch) => sum + (ch.viewCount || 0), 0);
    
    const summaryRow = {
      date: today,
      category: 'ì •ì¹˜',
      totalViews: totalViews,
      prevTotalViews: Math.floor(totalViews * 0.95),
      dodChangePct: 5.2,
      totalChannels: channels.length
    };
    
    const tr = document.createElement('tr');
    const changeClass = summaryRow.dodChangePct > 0 ? 'positive' : 'negative';
    tr.innerHTML = `
      <td>${summaryRow.date}</td>
      <td>${summaryRow.category}</td>
      <td>${this.fmt(summaryRow.totalViews)}</td>
      <td>${this.fmt(summaryRow.prevTotalViews)}</td>
      <td class="${changeClass}">+${summaryRow.dodChangePct}%</td>
      <td>${this.fmt(summaryRow.totalChannels)}</td>
    `;
    tbody.appendChild(tr);

    // ì±„ë„ ìˆœìœ„ ë¡œë“œ
    this.loadChannelsRanking();
  }

  loadChannelsRanking() {
    const tbody = document.getElementById('channels-body');
    if (!tbody) {
      console.error('âŒ channels-body ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
      return;
    }
    
    tbody.innerHTML = '';
    
    const channels = [...(this.data?.channels || [])].sort((a, b) => (b.viewCount || 0) - (a.viewCount || 0));
    console.log('ğŸ“Š ì±„ë„ ìˆœìœ„ ë°ì´í„°:', channels.length, 'ê°œ');
    
    channels.slice(0, 50).forEach((ch, index) => {
      const tr = document.createElement('tr');
      const prevViews = (ch.viewCount || 0) - (ch.viewCountDiff || 0);
      const pct = prevViews > 0 ? ((ch.viewCountDiff || 0) / prevViews * 100) : 0;
      const changeClass = pct > 0 ? 'positive' : pct < 0 ? 'negative' : '';
      
      tr.innerHTML = `
        <td style="font-weight: 600; color: var(--accent);">${index + 1}</td>
        <td><img src="${ch.thumbnail || 'https://picsum.photos/60/40'}" class="thumb" alt="thumbnail"/></td>
        <td><span class="channel-btn title" data-channel-id="${index}" style="cursor: pointer;">${ch.title || 'Unknown'}</span></td>
        <td>${this.fmt(ch.subscriberCount || 0)}</td>
        <td>${this.fmt(ch.viewCount || 0)}</td>
        <td class="${changeClass}">${this.fmt(ch.viewCountDiff || 0)}</td>
        <td class="${changeClass}">${pct.toFixed(2)}%</td>
        <td><span class="source-badge ${(ch.dataSource || 'github').toLowerCase()}">${ch.dataSource || 'github'}</span></td>
      `;
      
      tbody.appendChild(tr);
    });
    
// ëª¨ë‹¬ í•¨ìˆ˜ ì¶”ê°€
function openChannelModal(channel) {
    const modal = document.getElementById("modal");
    const modalContent = modal.querySelector(".modal-content");
    if(modal && modalContent) {
        modalContent.innerHTML = `
            <h2>${channel.title || 'Unknown'}</h2>
            <p>êµ¬ë…ì: ${(channel.subscriberCount||0).toLocaleString()}</p>
            <p>ì¡°íšŒìˆ˜: ${(channel.viewCount||0).toLocaleString()}</p>
        `;
        modal.style.display = "block";
    }
}

function showVideoModal(video) {
    const modal = document.getElementById("modal");
    const modalContent = modal.querySelector(".modal-content");
    if(modal && modalContent) {
        modalContent.innerHTML = `
            <h2>${video.title || 'Unknown Video'}</h2>
            <p>ì¡°íšŒìˆ˜: ${(video.views||0).toLocaleString()}</p>
            <p>ì¢‹ì•„ìš”: ${(video.statistics?.likeCount||0).toLocaleString()}</p>
        `;
        modal.style.display = "block";
    }
}


    // ì´ë²¤íŠ¸ ìœ„ì„ìœ¼ë¡œ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
    tbody.addEventListener('click', (e) => {
      if (e.target.classList.contains('channel-btn')) {
        const channelIndex = parseInt(e.target.dataset.channelId);
        const channel = channels[channelIndex];
        console.log('ğŸ–±ï¸ ì±„ë„ ë²„íŠ¼ í´ë¦­ë¨:', channel?.title, 'Index:', channelIndex);
        if (channel) {
          this.openChannelModal(channel);
        }
      }
    });
    
    console.log('âœ… ì±„ë„ ìˆœìœ„ ë¡œë”© ì™„ë£Œ');
  }

  loadSpikes() {
    const tbody = document.getElementById('spikes-body');
    if (!tbody) return;
    
    tbody.innerHTML = '';
    
    // ë¹„ë””ì˜¤ ë°ì´í„°ë¥¼ ì¡°íšŒìˆ˜ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
    const videos = [...(this.data?.videos || [])].sort((a, b) => (b.views || 0) - (a.views || 0));
    console.log('ğŸ”¥ ê¸‰ì¦ ë™ì˜ìƒ ë°ì´í„°:', videos.length, 'ê°œ');
    
    videos.slice(0, 30).forEach((v, index) => {
      const tr = document.createElement('tr');
      const uploadDate = new Date(v.published || Date.now()).toLocaleDateString('ko-KR');
      tr.innerHTML = `
        <td style="font-weight: 600; color: var(--accent);">${index + 1}</td>
        <td><img src="${v.thumbnail || 'https://picsum.photos/84/56'}" class="video-thumb" alt="thumbnail"/></td>
        <td><span class="title video-link" data-channel="${v.channelId}" style="cursor: pointer;">${v.title || 'Unknown Video'}</span></td>
        <td>${uploadDate}</td>
        <td class="positive">+${this.fmt(v.views || 0)}</td>
        <td>-</td>
        <td>-</td>
      `;
      
      tbody.appendChild(tr);
    });

    // ì´ë²¤íŠ¸ ìœ„ì„
    tbody.addEventListener('click', (e) => {
      if (e.target.classList.contains('video-link')) {
        const channelId = e.target.dataset.channel;
        const channel = this.data?.channels?.find(ch => ch.id === channelId);
        if (channel) {
          this.openChannelModal(channel);
        }
      }
    });
  }

  loadAboveAverage() {
    const tbody = document.getElementById('above-body');
    if (!tbody) return;
    
    tbody.innerHTML = '';
    
    // ìƒìœ„ í¼í¬ë¨¼ìŠ¤ ë¹„ë””ì˜¤
    const videos = [...(this.data?.videos || [])].slice(0, 20);
    console.log('â­ í‰ê·  ëŒ€ë¹„ ìš°ìˆ˜ ë™ì˜ìƒ:', videos.length, 'ê°œ');
    
    videos.forEach((v, index) => {
      const tr = document.createElement('tr');
      const uploadDate = new Date(v.published || Date.now()).toLocaleDateString('ko-KR');
      
      // ì±„ë„ ì •ë³´ ì°¾ê¸°
      const channel = this.data?.channels?.find(ch => ch.id === v.channelId);
      const channelName = channel?.title || 'ì—°í•©ë‰´ìŠ¤TV';
      
      tr.innerHTML = `
        <td style="font-weight: 600; color: var(--accent);">${index + 1}</td>
        <td><img src="${v.thumbnail || 'https://picsum.photos/84/56'}" class="video-thumb" alt="thumbnail"/></td>
        <td><span class="title video-link" data-channel="${v.channelId}" style="cursor: pointer;">${v.title || 'Unknown Video'}</span></td>
        <td><span class="title channel-link" data-channel="${v.channelId}" style="cursor: pointer; color: var(--purple);">${channelName}</span></td>
        <td>${uploadDate}</td>
        <td class="positive">2.5x</td>
        <td>${this.fmt(v.views || 0)}</td>
      `;
      
      tbody.appendChild(tr);
    });

    // ì´ë²¤íŠ¸ ìœ„ì„
    tbody.addEventListener('click', (e) => {
      if (e.target.classList.contains('video-link') || e.target.classList.contains('channel-link')) {
        const channelId = e.target.dataset.channel;
        const channel = this.data?.channels?.find(ch => ch.id === channelId);
        if (channel) {
          this.openChannelModal(channel);
        }
      }
    });
  }

  loadTrends() {
    const tbody = document.getElementById('trends-body');
    tbody.innerHTML = '';
    
    // ìƒ˜í”Œ íŠ¸ë Œë“œ ë°ì´í„°
    const trends = [
      { keyword: 'ì •ì¹˜ê°œí˜', interest: 85, change: 12 },
      { keyword: 'êµ­íšŒ', interest: 72, change: 8 },
      { keyword: 'ì •ì±…ë°œí‘œ', interest: 68, change: 15 }
    ];
    
    trends.forEach((trend, index) => {
      const tr = document.createElement('tr');
      const updateTime = new Date().toLocaleString('ko-KR');
      tr.innerHTML = `
        <td style="font-weight: 600; color: var(--accent);">${index + 1}</td>
        <td style="font-weight: 600;">${trend.keyword}</td>
        <td style="color: var(--purple); font-weight: 600;">${this.fmt(trend.interest)}</td>
        <td class="positive">+${trend.change}%</td>
        <td><span class="source-badge google">Google Trends</span></td>
        <td>${updateTime}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  loadSocial() {
    const tbody = document.getElementById('social-body');
    tbody.innerHTML = '';
    
    // ìƒ˜í”Œ ì†Œì…œ ë°ì´í„°
    const socialPosts = [
      { title: 'ì •ì¹˜ ê°œí˜ ê´€ë ¨ ë…¼ì˜', score: 342, comments: 89 },
      { title: 'ìƒˆë¡œìš´ ì •ì±… ë°œí‘œì— ëŒ€í•œ ë°˜ì‘', score: 278, comments: 67 },
      { title: 'êµ­íšŒ í˜„ì•ˆ í† ë¡ ', score: 195, comments: 45 }
    ];
    
    socialPosts.forEach((post, index) => {
      const tr = document.createElement('tr');
      const createTime = new Date().toLocaleString('ko-KR');
      tr.innerHTML = `
        <td style="font-weight: 600; color: var(--accent);">${index + 1}</td>
        <td style="max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
          <a href="#" class="title">${post.title}</a>
        </td>
        <td style="color: var(--success); font-weight: 600;">${this.fmt(post.score)}</td>
        <td>${this.fmt(post.comments)}</td>
        <td><span class="source-badge reddit">reddit</span></td>
        <td>${createTime}</td>
      `;
      tbody.appendChild(tr);
    });

    // ë‰´ìŠ¤ ë°ì´í„° ë¡œë“œ
    this.loadNews();
  }

  loadNews() {
    const tbody = document.getElementById('news-body');
    tbody.innerHTML = '';
    
    // ìƒ˜í”Œ ë‰´ìŠ¤ ë°ì´í„°
    const sampleNews = [
      { title: 'ì •ì¹˜ ê°œí˜ ë°©ì•ˆ êµ­íšŒ í†µê³¼', keyword: 'ì •ì¹˜', pubDate: new Date(), link: '#' },
      { title: 'ìƒˆë¡œìš´ ì •ì±… ë°œí‘œ ì˜ˆì •', keyword: 'ì •ì±…', pubDate: new Date(), link: '#' },
      { title: 'êµ­ì •ê°ì‚¬ ì£¼ìš” ì´ìŠˆ', keyword: 'êµ­ì •ê°ì‚¬', pubDate: new Date(), link: '#' }
    ];
    
    sampleNews.forEach((news, index) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td style="font-weight: 600; color: var(--accent);">${index + 1}</td>
        <td><a href="${news.link}" target="_blank" class="title">${news.title}</a></td>
        <td><span class="chip">${news.keyword}</span></td>
        <td>${news.pubDate.toLocaleString('ko-KR')}</td>
        <td><a href="${news.link}" target="_blank" style="color: var(--accent);">ë§í¬</a></td>
      `;
      tbody.appendChild(tr);
    });
  }

  loadSystem() {
    const tbody = document.getElementById('system-body');
    tbody.innerHTML = '';
    
    const accounts = [
      { 
        name: 'GitHub Actions', 
        isOnline: true, 
        lastUpdate: this.data?.timestamp || new Date().toISOString(),
        dataSize: JSON.stringify(this.data || {}).length,
        channels: this.data?.channels?.length || 0,
        videos: this.data?.videos?.length || 0
      }
    ];
    
    accounts.forEach(account => {
      const tr = document.createElement('tr');
      const statusClass = account.isOnline ? 'positive' : 'negative';
      const statusText = account.isOnline ? 'ğŸŸ¢ ì˜¨ë¼ì¸' : 'ğŸ”´ ì˜¤í”„ë¼ì¸';
      const lastUpdate = account.lastUpdate ? 
        new Date(account.lastUpdate).toLocaleString('ko-KR') : '-';
      const dataSize = account.dataSize ? 
        `${(account.dataSize / 1024).toFixed(1)}KB` : '0KB';
      
      tr.innerHTML = `
        <td style="font-weight: 600;">${account.name}</td>
        <td class="${statusClass}">${statusText}</td>
        <td>${lastUpdate}</td>
        <td>${dataSize}</td>
        <td>${this.fmt(account.channels)}</td>
        <td>${this.fmt(account.videos)}</td>
      `;
      tbody.appendChild(tr);
    });

    // í’ˆì§ˆ ì§€í‘œ ì—…ë°ì´íŠ¸
    this.updateQualityMetrics();
    this.createStatsChart();
  }

  updateQualityMetrics() {
    const channels = this.data?.channels?.length || 0;
    const videos = this.data?.videos?.length || 0;
    const targetChannels = 50;
    const targetVideos = 500;

    document.getElementById('channel-coverage').textContent = `${channels}/${targetChannels}`;
    document.getElementById('video-coverage').textContent = `${videos}/${targetVideos}`;
    document.getElementById('api-usage').textContent = `${this.data?.statistics?.quotaUsed || 0}%`;

    document.getElementById('channel-progress').style.width = `${Math.min(100, channels / targetChannels * 100)}%`;
    document.getElementById('video-progress').style.width = `${Math.min(100, videos / targetVideos * 100)}%`;
    document.getElementById('api-progress').style.width = `${this.data?.statistics?.quotaUsed || 0}%`;

    document.getElementById('duplicates-removed').textContent = '0';
    document.getElementById('active-sources').textContent = '1';
  }

  createStatsChart() {
    const ctx = document.getElementById('stats-chart');
    if (this.charts.stats) {
      this.charts.stats.destroy();
    }

    // ìƒ˜í”Œ ì°¨íŠ¸ ë°ì´í„°
    const labels = ['06:00', '12:00', '18:00', '00:00', '06:00', '12:00', '18:00'];
    const channelData = [1, 1, 1, 1, 1, 1, 1];
    const videoData = [10, 12, 13, 14, 15, 15, 15];

    this.charts.stats = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [{
          label: 'ì±„ë„ ìˆ˜',
          data: channelData,
          borderColor: 'var(--accent)',
          backgroundColor: 'rgba(59, 130, 246, 0.1)',
          yAxisID: 'y'
        }, {
          label: 'ë™ì˜ìƒ ìˆ˜',
          data: videoData,
          borderColor: 'var(--success)',
          backgroundColor: 'rgba(16, 185, 129, 0.1)',
          yAxisID: 'y1'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            type: 'linear',
            display: true,
            position: 'left',
          },
          y1: {
            type: 'linear',
            display: true,
            position: 'right',
            grid: {
              drawOnChartArea: false,
            },
          },
        }
      }
    });
  }

  openChannelModal(channel) {
    console.log('ğŸ” ëª¨ë‹¬ ì—´ê¸° ì‹œì‘');
    console.log('ğŸ“Š ì±„ë„ ë°ì´í„°:', channel);
    
    if (!channel) {
      console.error('âŒ ì±„ë„ ë°ì´í„° ì—†ìŒ');
      return;
    }

    const modal = document.getElementById('modal');
    
    // ì±„ë„ ì •ë³´ ì—…ë°ì´íŠ¸
    document.getElementById('channel-id').textContent = channel.id || 'Unknown';
    document.getElementById('channel-name').textContent = channel.title || 'Unknown Channel';
    document.getElementById('channel-avatar').src = channel.thumbnail || 'https://picsum.photos/40/40';
    document.getElementById('channel-desc').textContent = channel.description || '-';
    document.getElementById('channel-category').textContent = 'ì •ì¹˜';
    document.getElementById('channel-subcategory').textContent = 'ë‰´ìŠ¤';
    
    const channelUrl = `https://www.youtube.com/channel/${channel.id}`;
    document.getElementById('channel-url').href = channelUrl;
    document.getElementById('channel-url').textContent = channelUrl;
    
    document.getElementById('daily-uploads').textContent = channel.videoCount ? 
      Math.round(channel.videoCount / 30) : '0';
    document.getElementById('weekly-views').textContent = this.fmt(channel.viewCount || 0);
    document.getElementById('avg-duration').textContent = '300';
    document.getElementById('shorts-ratio').textContent = '15';

    // ì°¨íŠ¸ ìƒì„±
    const ctx = document.getElementById('chart');
    if (ctx) {
      if (this.charts.channelModal) {
        this.charts.channelModal.destroy();
      }
      
      // ì¼ë³„ ì¡°íšŒìˆ˜ ë°ì´í„° ìƒì„±
      const dailyViews = Array.from({length: 17}, () => 
        Math.floor(Math.random() * 10000000) + 1000000
      );
      
      const dates = [];
      const today = new Date();
      for (let i = 16; i >= 0; i--) {
        const date = new Date(today);
        date.setDate(date.getDate() - i);
        dates.push(`${date.getMonth() + 1}/${date.getDate()}`);
      }
      
      this.charts.channelModal = new Chart(ctx, {
        type: 'line',
        data: {
          labels: dates,
          datasets: [{
            label: 'daily_view_count',
            data: dailyViews,
            borderColor: '#ff9800',
            backgroundColor: 'transparent',
            tension: 0.2,
            pointRadius: 3,
            pointBackgroundColor: '#ff9800',
            pointBorderColor: '#fff',
            pointBorderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return `ì¡°íšŒìˆ˜: ${context.parsed.y.toLocaleString()}`;
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  if (value >= 1000000) {
                    return (value / 1000000).toFixed(0) + 'M';
                  } else if (value >= 1000) {
                    return (value / 1000).toFixed(0) + 'K';
                  }
                  return value;
                }
              },
              grid: {
                color: 'rgba(0, 0, 0, 0.05)'
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          }
        }
      });
    }

    // ëª¨ë‹¬ ì—´ê¸°
    modal.style.display = 'block';
    console.log('âœ… ëª¨ë‹¬ í‘œì‹œ ì™„ë£Œ');
  }

  setupEventListeners() {
    console.log('ğŸ›ï¸ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì¤‘...');
    
    // ëª¨ë‹¬ ë‹«ê¸° ì´ë²¤íŠ¸
    const closeBtn = document.getElementById('close');
    const modal = document.getElementById('modal');
    
    if (closeBtn) {
      closeBtn.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        console.log('ğŸšª ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼ í´ë¦­ë¨');
        if (modal) modal.style.display = 'none';
      });
    }
    
    if (modal) {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          console.log('ğŸšª ëª¨ë‹¬ ë°°ê²½ í´ë¦­ìœ¼ë¡œ ë‹«í˜');
          modal.style.display = 'none';
        }
      });
    }

    // íƒ­ ì „í™˜ ì´ë²¤íŠ¸
    const tabs = document.querySelectorAll('.tab');
    console.log('ğŸ“‘ íƒ­ ê°œìˆ˜:', tabs.length);
    
    tabs.forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const tab = btn.dataset.tab;
        console.log('ğŸ”€ íƒ­ ì „í™˜:', tab);
        
        // íƒ­ í™œì„±í™”
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        btn.classList.add('active');
        
        // ì½˜í…ì¸  í‘œì‹œ
        document.querySelectorAll('.tab-content').forEach(content => {
          content.style.display = 'none';
        });
        const targetTab = document.getElementById(tab);
        if (targetTab) {
          targetTab.style.display = 'block';
        }
      });
    });

    // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modal && modal.style.display === 'block') {
        console.log('ğŸšª ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«í˜');
        modal.style.display = 'none';
      }
    });

    console.log('âœ… ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì™„ë£Œ');
  }

  startAutoRefresh() {
    // 5ë¶„ë§ˆë‹¤ ìë™ ìƒˆë¡œê³ ì¹¨
    this.updateInterval = setInterval(() => {
      this.loadAllData().then(() => this.render());
    }, 5 * 60 * 1000);
  }

  render() {
    console.log('ğŸ¨ ë Œë”ë§ ì‹œì‘');
    this.updateHeaderStats();
    this.loadOverview();
    this.loadSpikes();
    this.loadAboveAverage();
    this.loadTrends();
    this.loadSocial();
    this.loadSystem();
    console.log('âœ… ë Œë”ë§ ì™„ë£Œ');
  }

  // ìƒ˜í”Œ ë°ì´í„° ìƒì„± í•¨ìˆ˜ë“¤
  getSampleData() {
    return {
      channels: Array.from({ length: 5 }, (_, i) => ({
        id: `sample_channel_${i}`,
        title: ['ì •ì¹˜ì±„ë„A', 'ë‰´ìŠ¤ë¶„ì„B', 'ì‹œì‚¬í† ë¡ C', 'ì •ì¹˜í‰ë¡ D', 'ì¢…í•©ë‰´ìŠ¤E'][i],
        description: 'ìƒ˜í”Œ ì±„ë„ ì„¤ëª…',
        thumbnail: `https://picsum.photos/seed/ch${i}/60/40`,
        viewCount: Math.floor(Math.random() * 10000000) + 1000000,
        subscriberCount: Math.floor(Math.random() * 100000) + 10000,
        videoCount: Math.floor(Math.random() * 100) + 10
      })),
      videos: Array.from({ length: 20 }, (_, i) => ({
        videoId: `sample_video_${i}`,
        channelId: `sample_channel_${i % 5}`,
        title: `ìƒ˜í”Œ ì •ì¹˜ ë‰´ìŠ¤ ${i + 1}`,
        thumbnail: `https://picsum.photos/seed/vid${i}/84/56`,
        views: Math.floor(Math.random() * 50000) + 1000,
        published: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString()
      })),
      timestamp: new Date().toISOString(),
      statistics: {
        totalChannels: 5,
        totalVideos: 20,
        quotaUsed: 10
      }
    };
  }

  getSampleStats() {
    return {
      summary: {
        totalChannels: 5,
        totalVideos: 20,
        totalViews: 50000000
      }
    };
  }
}

// ì•± ì‹œì‘
document.addEventListener('DOMContentLoaded', () => {
  console.log('ğŸŒŸ DOMì´ ì™„ì „íˆ ë¡œë“œë¨, ëŒ€ì‹œë³´ë“œ ì‹œì‘');
  window.dashboard = new EnhancedYouTubeDashboard();
});
</script>
</body>
</html>